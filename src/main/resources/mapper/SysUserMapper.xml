<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ay.dao.SysUserDao">
    <cache/>
    <resultMap id="userMap" type="com.ay.model.SysUser">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="no" column="no"/>
        <result property="position" column="position"/>
        <result property="status" column="status"/>
    </resultMap>
    <!-- sql代码块 -->
    <sql id="table_column">
        id,
        name,
        no,
        status,
        position
    </sql>

    <select id="findAll" resultMap="userMap">
        select
        <include refid="table_column"/>
        from sys_user
        where status != '0';
    </select>

    <insert id="save" useGeneratedKeys="true" keyProperty="id"
            parameterType="com.ay.model.SysUser">
        <selectKey keyProperty="id" resultType="int" order="BEFORE">
            select max(id) + 1 as id from sys_user
        </selectKey>
        insert into sys_user(id, name ,no, status, position)
        value (#{id},#{name},#{no},#{status},#{position} )
    </insert>

</mapper>